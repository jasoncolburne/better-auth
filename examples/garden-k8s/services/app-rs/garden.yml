kind: Build
name: app-rs
type: container

source:
  path: ../../../..  # Set build context to repository root

include:
  - implementations/better-auth-rs/**/*
  - examples/garden-k8s/services/app-rs/**/*
  - examples/garden-k8s/test-fixtures/**/*

spec:
  # Build the Docker image for the Rust app server
  dockerfile: examples/garden-k8s/services/app-rs/Dockerfile

---

kind: Deploy
name: app-rs
type: kubernetes

dependencies:
  - build.app-rs
  - deploy.redis
  - deploy.restart-controller
  - deploy.hsm

spec:
  manifestTemplates:
    - manifests.yml.tpl
